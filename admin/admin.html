<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Console â€” MVS Aqua</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800&family=Open+Sans:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/admin.css">
</head>
<body>

<!-- Sidebar -->
<aside class="sidebar" id="sidebar">
  <div class="sidebar-brand">ğŸŸ MVS Aqua Admin</div>
  <nav class="sidebar-nav">
    <div class="sidebar-section">Dashboard</div>
    <a href="#" onclick="showSection('dashboard')" class="active" id="nav-dashboard"><span class="nav-icon">ğŸ“Š</span> Dashboard</a>

    <div class="sidebar-section">Catalog</div>
    <a href="#" onclick="showSection('products')" id="nav-products"><span class="nav-icon">ğŸ </span> Products</a>
    <a href="#" onclick="showSection('stock')" id="nav-stock"><span class="nav-icon">ğŸ“¦</span> Stock</a>
    <a href="#" onclick="showSection('offers')" id="nav-offers"><span class="nav-icon">ğŸ</span> Offers</a>

    <div class="sidebar-section">Sales</div>
    <a href="#" onclick="showSection('orders')" id="nav-orders"><span class="nav-icon">ğŸ›’</span> Orders</a>
    <a href="#" onclick="showSection('invoices')" id="nav-invoices"><span class="nav-icon">ğŸ§¾</span> Invoices</a>

    <div class="sidebar-section">Tools</div>
    <a href="../frontend/index.html" target="_blank"><span class="nav-icon">ğŸŒ</span> View Frontend</a>
    <a href="https://wa.me/919876543210" target="_blank"><span class="nav-icon">ğŸ’¬</span> WhatsApp</a>
  </nav>
  <div class="sidebar-footer">MVS Aqua v1.0 Â· Admin Panel</div>
</aside>

<!-- Main -->
<main class="admin-main">
  <header class="admin-header">
    <div style="display:flex;align-items:center;gap:12px">
      <h2 id="page-title">ğŸ“Š Dashboard</h2>
    </div>
    <div style="display:flex;align-items:center;gap:12px">
      <span style="font-size:0.85rem;color:#888" id="last-updated"></span>
      <span style="background:#d1fae5;color:#065f46;padding:4px 12px;border-radius:20px;font-size:0.82rem;font-weight:700">â— Live</span>
      <button class="btn btn-sm btn-outline" onclick="logout()">Logout</button>
    </div>
  </header>

  <div class="admin-body">

    <!-- ======= LOGIN GATE ======= -->
    <div id="login-gate" style="display:flex;align-items:center;justify-content:center;min-height:60vh">
      <div style="background:white;padding:36px;border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,0.1);max-width:380px;width:100%">
        <div style="text-align:center;margin-bottom:24px"><div style="font-size:3rem">ğŸ”</div><h2 style="color:var(--primary);font-family:Montserrat,sans-serif">Admin Login</h2></div>
        <form id="login-form">
          <div class="form-group"><label>Username</label><input type="text" id="login-user" placeholder="admin" required></div>
          <div class="form-group"><label>Password</label><input type="password" id="login-pass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required></div>
          <button type="submit" class="btn btn-primary" style="width:100%;justify-content:center;padding:12px">Login to Admin</button>
        </form>
        <p style="text-align:center;margin-top:14px;font-size:0.82rem;color:#888">Default: admin / admin123</p>
      </div>
    </div>

    <!-- ======= DASHBOARD ======= -->
    <div id="section-dashboard" class="section-content" style="display:none">
      <div class="admin-grid-4">
        <div class="stat-card"><div class="stat-icon blue">ğŸ“¦</div><div><div class="stat-value" id="stat-products">â€”</div><div class="stat-label">Total Products</div></div></div>
        <div class="stat-card"><div class="stat-icon green">ğŸ›’</div><div><div class="stat-value" id="stat-orders">â€”</div><div class="stat-label">Total Orders</div></div></div>
        <div class="stat-card"><div class="stat-icon yellow">ğŸ’°</div><div><div class="stat-value" id="stat-revenue">â€”</div><div class="stat-label">Total Revenue</div></div></div>
        <div class="stat-card"><div class="stat-icon red">âš ï¸</div><div><div class="stat-value" id="stat-lowstock">â€”</div><div class="stat-label">Low Stock Items</div></div></div>
      </div>

      <div class="admin-grid-2">
        <div class="admin-panel">
          <div class="admin-panel-header"><h3>Recent Orders</h3><button class="btn btn-sm btn-primary" onclick="showSection('orders')">View All</button></div>
          <div id="recent-orders"><div style="text-align:center;padding:20px"><div class="loader"></div></div></div>
        </div>
        <div class="admin-panel">
          <div class="admin-panel-header"><h3>Low Stock Alert</h3><button class="btn btn-sm btn-primary" onclick="showSection('stock')">Manage Stock</button></div>
          <div id="low-stock-list"><div style="text-align:center;padding:20px"><div class="loader"></div></div></div>
        </div>
      </div>
    </div>

    <!-- ======= PRODUCTS ======= -->
    <div id="section-products" class="section-content" style="display:none">
      <div class="admin-panel">
        <div class="admin-panel-header">
          <h3>All Products</h3>
          <button class="btn btn-primary" onclick="openProductModal()">+ Add Product</button>
        </div>
        <div style="margin-bottom:14px;display:flex;gap:10px">
          <input type="text" id="product-search" placeholder="Search products..." style="max-width:280px" oninput="filterTable('products-table','product-search')">
          <select onchange="filterTableSelect('products-table', this, 4)">
            <option value="">All Categories</option>
            <option>fish</option><option>plants</option><option>accessories</option><option>food</option><option>corals</option>
          </select>
        </div>
        <div style="overflow-x:auto">
          <table class="admin-table" id="products-table">
            <thead><tr><th>#</th><th>Name</th><th>Price</th><th>Stock</th><th>Category</th><th>Actions</th></tr></thead>
            <tbody id="products-tbody"><tr><td colspan="6" style="text-align:center;padding:30px"><div class="loader"></div></td></tr></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- ======= STOCK ======= -->
    <div id="section-stock" class="section-content" style="display:none">
      <div class="admin-panel">
        <div class="admin-panel-header"><h3>Stock Management</h3></div>
        <div style="overflow-x:auto">
          <table class="admin-table" id="stock-table">
            <thead><tr><th>Product</th><th>Current Stock</th><th>Status</th><th>Update Stock</th></tr></thead>
            <tbody id="stock-tbody"><tr><td colspan="4" style="text-align:center;padding:30px"><div class="loader"></div></td></tr></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- ======= OFFERS ======= -->
    <div id="section-offers" class="section-content" style="display:none">
      <div class="admin-panel">
        <div class="admin-panel-header"><h3>Offers Management</h3><button class="btn btn-primary" onclick="openOfferModal()">+ Add Offer</button></div>
        <div id="offers-list"><div style="text-align:center;padding:20px"><div class="loader"></div></div></div>
      </div>
    </div>

    <!-- ======= ORDERS ======= -->
    <div id="section-orders" class="section-content" style="display:none">
      <div class="admin-panel">
        <div class="admin-panel-header"><h3>All Orders</h3></div>
        <div style="overflow-x:auto">
          <table class="admin-table" id="orders-table">
            <thead><tr><th>Order ID</th><th>Customer</th><th>Total</th><th>Status</th><th>Date</th><th>Actions</th></tr></thead>
            <tbody id="orders-tbody"><tr><td colspan="6" style="text-align:center;padding:30px"><div class="loader"></div></td></tr></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- ======= INVOICES ======= -->
    <div id="section-invoices" class="section-content" style="display:none">
      <div class="admin-panel">
        <div class="admin-panel-header">
          <h3>Invoices</h3>
          <button class="btn btn-primary" onclick="openInvoiceModal()">+ Create Invoice</button>
        </div>
        <div style="overflow-x:auto">
          <table class="admin-table" id="invoices-table">
            <thead><tr><th>Invoice #</th><th>Customer</th><th>Amount</th><th>Date</th><th>Actions</th></tr></thead>
            <tbody id="invoices-tbody"><tr><td colspan="5" style="text-align:center;padding:30px"><div class="loader"></div></td></tr></tbody>
          </table>
        </div>
      </div>
    </div>

  </div><!-- end admin-body -->
</main>

<!-- Product Modal -->
<div id="product-modal" class="modal-overlay" style="display:none">
  <div class="modal">
    <div class="modal-header"><h3 id="product-modal-title">Add Product</h3><span class="modal-close" onclick="closeModal('product-modal')">âœ•</span></div>
    <form id="product-form">
      <input type="hidden" id="p-id">
      <div class="admin-grid-2">
        <div class="form-group"><label>Product Name *</label><input type="text" id="p-name" required></div>
        <div class="form-group"><label>Category *</label>
          <select id="p-category"><option value="fish">ğŸ  Fish</option><option value="plants">ğŸŒ¿ Plants</option><option value="accessories">âš™ï¸ Accessories</option><option value="food">ğŸ¥£ Food</option><option value="corals">ğŸª¸ Corals</option></select>
        </div>
      </div>
      <div class="admin-grid-2">
        <div class="form-group"><label>Price (â‚¹) *</label><input type="number" id="p-price" min="0" required></div>
        <div class="form-group"><label>Original Price (â‚¹)</label><input type="number" id="p-original-price" min="0"></div>
      </div>
      <div class="admin-grid-2">
        <div class="form-group"><label>Stock Qty *</label><input type="number" id="p-stock" min="0" required></div>
        <div class="form-group"><label>Emoji (icon)</label><input type="text" id="p-emoji" placeholder="ğŸŸ"></div>
      </div>
      <div class="form-group"><label>Image URL</label><input type="url" id="p-image" placeholder="https://..."></div>
      <div class="form-group"><label>Description</label><textarea id="p-desc" rows="3"></textarea></div>
      <div class="form-group"><label>Care Tips</label><input type="text" id="p-care"></div>
      <div class="form-group"><label>Featured</label>
        <select id="p-featured"><option value="0">No</option><option value="1">Yes â€” Show on homepage</option></select>
      </div>
      <div style="display:flex;gap:10px;justify-content:flex-end">
        <button type="button" class="btn btn-outline" onclick="closeModal('product-modal')">Cancel</button>
        <button type="submit" class="btn btn-primary">Save Product</button>
      </div>
    </form>
  </div>
</div>

<!-- Offer Modal -->
<div id="offer-modal" class="modal-overlay" style="display:none">
  <div class="modal">
    <div class="modal-header"><h3>Add / Edit Offer</h3><span class="modal-close" onclick="closeModal('offer-modal')">âœ•</span></div>
    <form id="offer-form">
      <input type="hidden" id="o-id">
      <div class="form-group"><label>Offer Title *</label><input type="text" id="o-title" required></div>
      <div class="form-group"><label>Description</label><input type="text" id="o-desc"></div>
      <div class="admin-grid-2">
        <div class="form-group"><label>Discount %</label><input type="number" id="o-pct" min="0" max="100"></div>
        <div class="form-group"><label>Promo Code</label><input type="text" id="o-code" placeholder="e.g. SAVE20"></div>
      </div>
      <div class="admin-grid-2">
        <div class="form-group"><label>Emoji</label><input type="text" id="o-emoji" placeholder="ğŸ"></div>
        <div class="form-group"><label>Active</label><select id="o-active"><option value="1">Yes</option><option value="0">No</option></select></div>
      </div>
      <div style="display:flex;gap:10px;justify-content:flex-end">
        <button type="button" class="btn btn-outline" onclick="closeModal('offer-modal')">Cancel</button>
        <button type="submit" class="btn btn-primary">Save Offer</button>
      </div>
    </form>
  </div>
</div>

<!-- Invoice Modal -->
<div id="invoice-modal" class="modal-overlay" style="display:none">
  <div class="modal">
    <div class="modal-header"><h3>Create Invoice</h3><span class="modal-close" onclick="closeModal('invoice-modal')">âœ•</span></div>
    <form id="invoice-form">
      <div class="form-group"><label>Customer Name *</label><input type="text" id="inv-name" required></div>
      <div class="form-group"><label>Phone</label><input type="text" id="inv-phone"></div>
      <div class="form-group"><label>Address</label><input type="text" id="inv-address"></div>
      <div class="form-group"><label>Order ID</label><input type="text" id="inv-order"></div>
      <div class="form-group"><label>Items (one per line: Name, Qty, Price)</label>
        <textarea id="inv-items" rows="4" placeholder="Betta Fish, 2, 120&#10;Java Fern, 1, 80"></textarea>
      </div>
      <div class="admin-grid-2">
        <div class="form-group"><label>Delivery Charge</label><input type="number" id="inv-delivery" value="0" min="0"></div>
        <div class="form-group"><label>Discount</label><input type="number" id="inv-discount" value="0" min="0"></div>
      </div>
      <div style="display:flex;gap:10px;justify-content:flex-end">
        <button type="button" class="btn btn-outline" onclick="closeModal('invoice-modal')">Cancel</button>
        <button type="submit" class="btn btn-success">Generate Invoice</button>
      </div>
    </form>
  </div>
</div>

<script src="../frontend/assets/js/api.js"></script>
<script src="assets/js/admin.js"></script>
<script src="assets/js/product.js"></script>
<script src="assets/js/orders.js"></script>
<script src="assets/js/stock.js"></script>
<script src="assets/js/offers.js"></script>
<script src="assets/js/invoice.js"></script>
</body>
</html>
